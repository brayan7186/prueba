<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>planilla</title>

	<script src="https://code.jquery.com/jquery-3.7.0.js"
		integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>

	<link rel="stylesheet" type="text/css" href="/css/planilla.css">

	<script type="text/javascript" src="/js/planilla.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

</head>

<body>

	<div class="container mt-5 mx-auto">
		<h1 class="text-center mb-4">Planilla</h1>

		<div class="row mb-4">
			<div class="col-md-3 mb-4">
				<label class="form-check-label">Año:</label>
				<input type="number" class="form-control" id="txtAnioBuscar" placeholder="Ingrese el año">
			</div>

			<div class="col-md-3 mb-4">
				<label class="form-check-label">Mes:</label>
				<input class="form-control" id="txtMesBuscar" placeholder="Ingrese el mes">
			</div>

			<div class="col-md-1">
				<label>&nbsp;</label>
				<button id="btnBuscarPlanilla" class="btn btn-primary btn-block"
					onclick="fn_listarContrato()">Buscar</button>
			</div>
		</div>
	</div>










	<div class="row mb-4">
		<div class="col-md-6 ml-3">
			<!-- Agrega la clase "ml-3" para agregar margen izquierdo -->
			<button id="btnListaPlanilla" class="btn btn-primary" onclick="">Visualizar</button>
			<button id="btnregistrarPlanilla" class="btn btn-primary" onclick="abrirModal()">Registrar</button>
		</div>
	</div>



	<div class="col-md-11">
		<table border="1" class="table table-hover table-bordered">
			<thead>
				<th>Código</th>
				<th>Descripcion</th>
				<th>Año</th>
				<th>Mes</th>
				<th>Monto Total</th>
				<th>Acciones</th>
			</thead>
			<tbody id="tbody_planilla">
				<!-- Aquí se cargarán dinámicamente los contratos -->
			</tbody>
		</table>
	</div>
	</div>



	<!-- Modal para registrar una nueva planilla -->
	<div class="modal fade" id="modalAgregarPlanilla" tabindex="-1" aria-labelledby="modalAgregarPlanillaLabel"
		aria-hidden="true" data-backdrop="static">
		<div class="modal-dialog modal-dialog-centered modal-xl">
			<!-- Cambiado a modal-xl para hacerlo más grande -->
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="modalAgregarPlanillaLabel">Registrar Planilla</h5>
					<button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">

					<div class="container">
						<div class="row mb-3">
							<div class="col-md-3">
								<div class="form-group">
									<label>Año:</label>
									<input type="text" class="form-control" id="txtAnio" disabled>
								</div>
							</div>
							<div class="col-md-3">
								<label for="selectMes">Mes:</label>
								<select class="form-control" id="selectMes">
									<option value="Enero">Enero</option>
									<option value="Febrero">Febrero</option>
									<option value="Marzo">Marzo</option>
									<option value="Abril">Abril</option>
									<option value="Mayo">Mayo</option>
									<option value="Junio">Junio</option>
									<option value="Julio">Julio</option>
									<option value="Agosto">Agosto</option>
									<option value="Septiembre">Septiembre</option>
									<option value="Octubre">Octubre</option>
									<option value="Noviembre">Noviembre</option>
									<option value="Diciembre">Diciembre</option>
								</select>
							</div>
							<div class="col-md-3">
								<label>Monto Total:</label>
								<input type="text" class="form-control" id="txtMontoTotalPlanilla" disabled>
							</div>
							<div class="col-md-3">
								<img src="/img/planilla.PNG" alt="Imagen" class="img-fluid">
							</div>
						</div>



						<div class="row">
							<div class="col">
								<button class="btn btn-primary" id="btnAgregarDetalle"
									onclick="abrirModalDetalle()">Agregar Trabajador</button>
							</div>
						</div>
						<div class="row mb-3">
							<div class="col">
								<table class="table" id="tablaDetallePlanilla">
								
								  
<thead>
    <tr>
        <th colspan="4"></th> <!-- Celdas vacías para dejar espacio -->
        <th colspan="3">Descuento Ley</th> <!-- Agrupación de Impuesto Renta, AFP y AFP Seguro -->
        <th colspan="4"></th> <!-- Celdas vacías para mantener el formato -->
    </tr>
    <tr>
        <th>codTrabajador</th>
        <th>Trabajador</th>
        <th>Sueldo Bruto</th>
        <th>Bonificacion</th>
        <th>Impuesto Renta</th> 
        <th>Afp</th> 
        <th>Afp Seguro</th> 
        <th>Sueldo Neto</th>
        <th>Accion</th>
    </tr>
</thead>
									<tbody id="tbody_registroPlanilla">
										<!-- Aquí se agregarán las filas dinámicamente -->
									</tbody>
								</table>
							</div>
						</div>

					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
					<button type="button" class="btn btn-primary" id="btnGuardarPlanilla"
						onclick="fn_registrarPlanilla()">Registrar</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Agergar  trabajador -->



	<!-- Modal para agregar detalle -->
	<div class="modal fade" id="modalAgregarDetalle" tabindex="-1" aria-labelledby="modalAgregarDetalleLabel"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="modalAgregarDetalleLabel">Agregar Detalle</h5>
					<button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<!-- Contenido del formulario para agregar detalle -->
					<div class="form-group">
						<label>DNI Trabajador:</label>
						<input type="text" class="form-control" id="txtDniTrabajador"
							oninput="fn_cargarTrabajadorPorDni()">
					</div>
					<div class="form-group">
						<label>Trabajador:</label>
						<input type="text" class="form-control" id="txtTrabajadorDet" disabled>
					</div>
					<div class="form-group">
						<label>Bonificación:</label>
						<input type="text" class="form-control" id="txtBonificacionDet" disabled>
					</div>
					<div class="form-group">
						<label>Sueldo Bruto:</label>
						<input type="text" class="form-control" id="txtSueldoBrutoDet" disabled>
					</div>


				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
					<button type="button" class="btn btn-primary" id="btnAgregarDetalleConfirmar"
						onclick="agregarFilaTabla()">Agregar</button>
				</div>
			</div>
		</div>
	</div>








	<!-- Bootstrap JS y jQuery -->
	<script src="https://code.jquery.com/jquery-3.7.0.js"
		integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>